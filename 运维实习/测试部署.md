  å‰è¨€
  
>æµ‹è¯•ç¯å¢ƒä¸»è¦ç”¨äºç³»ç»Ÿé›†æˆæµ‹è¯•ï¼Œ  
  åç«¯æœåŠ¡ã€å‰ç«¯é¡¹ç›®å’Œä¸­é—´ä»¶ç»Ÿä¸€éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ï¼Œ  
  é€šè¿‡ Nginx æš´éœ²æµ‹è¯•åŸŸåã€‚  
  PC ç«¯ä½¿ç”¨å…¬ç½‘åŸŸåè®¿é—®ï¼Œ  
  å°ç¨‹åºç«¯å¿…é¡»ä½¿ç”¨ HTTPS + å·²å¤‡æ¡ˆåŸŸåè¿›è¡Œæ¥å£è°ƒç”¨ã€‚

### 1.èµ„æºé…ç½®è€ƒè™‘

==åŸåˆ™==
æ¯ä¸ªå®¹å™¨éƒ½è®¾ç½® CPU + å†…å­˜é™åˆ¶

Java æœåŠ¡é¢å¤–è®¾ç½® JVM å †å¤§å°ï¼Œç¡®ä¿æ€»å†…å­˜ < å®¹å™¨å†…å­˜é™åˆ¶

é Java æœåŠ¡ä¹Ÿå¯è®¾ç½®åº”ç”¨å†…å­˜é™åˆ¶ï¼ˆRedis maxmemoryã€MySQL bufferï¼‰

å‚è€ƒå®˜æ–¹æ¨èå€¼ï¼Œç»“åˆå®¿ä¸»æœºèµ„æºå’Œå¹¶å‘é‡è°ƒæ•´

==éƒ¨ç½²é¡ºåºï¼š==
ä¸­é—´ä»¶ â†’ åç«¯æœåŠ¡ â†’ å‰ç«¯

#### ==ä¸­é—´ä»¶èµ„æºè§„åˆ’==
 4 ä¸ªä¸­é—´ä»¶ï¼ˆElasticsearchã€Nacosã€Redisã€MySQLï¼‰
 
 ##### **ç”Ÿäº§ç¯å¢ƒå‚è€ƒèµ„æºé™åˆ¶**

 1ï¸âƒ£ Elasticsearch (7.17.x)

|é…ç½®|æ¨èå€¼|è¯´æ˜|
|---|---|---|
|Docker å†…å­˜é™åˆ¶|4GB|é¿å…å®¿ä¸»æœºè¢«æŠ¢å…‰ï¼Œå¯æ ¹æ®é›†ç¾¤å¤§å°è°ƒæ•´|
|Docker CPUé™åˆ¶|2 æ ¸|é«˜è´Ÿè½½å¯æ ¹æ®èŠ‚ç‚¹ CPU è°ƒæ•´|
|JVM å †å†…å­˜|`-Xms2g -Xmx2g`|æœ€å¤§å † â‰ˆ Docker å†…å­˜çš„ä¸€åŠ|
|ulimits|`memlock=-1`, `nofile=65536`|å®˜æ–¹å»ºè®®ï¼Œé˜²æ­¢å†…å­˜è¢« swap å’Œæ–‡ä»¶å¥æŸ„ä¸è¶³|

ç¤ºä¾‹ Docker Compose é…ç½®ï¼š

```yaml
elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:7.17.6
  deploy:
    resources:
      limits:
        cpus: '2.0'
        memory: 4G
  environment:
    - ES_JAVA_OPTS=-Xms2g -Xmx2g
  ulimits:
    memlock:
      soft: -1
      hard: -1
    nofile:
      soft: 65536
      hard: 65536
```


2ï¸âƒ£ Nacos (v2.2.x)

|é…ç½®|æ¨èå€¼|è¯´æ˜|
|---|---|---|
|Docker å†…å­˜é™åˆ¶|1GB|JVM å †åŠ è¿è¡Œæ—¶æ¶ˆè€—æ€»å†…å­˜|
|Docker CPUé™åˆ¶|1 æ ¸|Nacos æœåŠ¡ä¸éœ€è¦å¤ªå¤š CPU|
|JVM å †å†…å­˜|`JVM_XMS=512m`, `JVM_XMX=512m`|å †å†…å­˜çº¦ä¸ºæ€»å†…å­˜ä¸€åŠ|

ç¤ºä¾‹ï¼š

```yaml
nacos:
  image: nacos/nacos-server:v2.2.3
  deploy:
    resources:
      limits:
        cpus: '1.0'
        memory: 1G
  environment:
    - JVM_XMS=512m
    - JVM_XMX=512m
```


 3ï¸âƒ£ Redis (6.2)

|é…ç½®|æ¨èå€¼|è¯´æ˜|
|---|---|---|
|Docker å†…å­˜é™åˆ¶|1â€“2GB|å–å†³äºæ•°æ®é‡|
|Docker CPUé™åˆ¶|1 æ ¸|Redis æ˜¯å•çº¿ç¨‹ï¼Œå¤šæ ¸ç”¨äºå¤šä¸ªå®ä¾‹|
|Redis maxmemory|800MBâ€“1.5GB|é¿å…å æ»¡å®¿ä¸»æœºå†…å­˜|

ç¤ºä¾‹ï¼š

```yaml
redis:
  image: redis:6.2
  deploy:
    resources:
      limits:
        cpus: '1.0'
        memory: 1G
  command: ["redis-server", "--maxmemory", "1gb", "--maxmemory-policy", "allkeys-lru"]
```


 4ï¸âƒ£ MySQL (5.7)

|é…ç½®|æ¨èå€¼|è¯´æ˜|
|---|---|---|
|Docker å†…å­˜é™åˆ¶|2GB|é¿å… buffer pool å æ»¡å®¿ä¸»æœº|
|Docker CPUé™åˆ¶|1â€“2 æ ¸|æ ¹æ®è´Ÿè½½è°ƒæ•´|
|InnoDB buffer pool|1GB|æ€»å†…å­˜ 50% å·¦å³ï¼Œé¿å… MySQL OOM|

ç¤ºä¾‹ï¼š

```yaml
mysql:
  image: mysql:5.7
  deploy:
    resources:
      limits:
        cpus: '1.0'
        memory: 2G
  environment:
    - MYSQL_ROOT_PASSWORD=nacos
  command: ["--character-set-server=utf8mb4", "--collation-server=utf8mb4_unicode_ci", "--innodb-buffer-pool-size=1G"]
```


 ğŸ”¹ åŸåˆ™
 **JVM å †æˆ–åº”ç”¨å†…å­˜** = Docker å†…å­˜çš„ä¸€åŠåˆ°ä¸‰åˆ†ä¹‹äºŒ
æ€»èµ„æºéœ€æ±‚ï¼ˆç²—ç•¥ï¼‰
ä¸€å°æœºå™¨è·‘ Elasticsearchã€Nacosã€Redisã€MySQL Docker å®¹å™¨ï¼Œå»ºè®® **16GB å†…å­˜ã€8 æ ¸ CPUã€SSD**ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å„æœåŠ¡èµ„æºå……è¶³ï¼Œé¿å… OOM æˆ–é«˜ CPU å‹åŠ›ã€‚


---
**æµ‹è¯•ç¯å¢ƒ**

##### æµ‹è¯•ç¯å¢ƒæ¨èèµ„æºåˆ†é…

| æœåŠ¡            | Docker å†…å­˜é™åˆ¶ | JVM / åº”ç”¨å†…å­˜           | CPU æ ¸å¿ƒ  | è¯´æ˜             |
| ------------- | ----------- | -------------------- | ------- | -------------- |
| Elasticsearch | 2 GB        | å † 1 GB               | 1 æ ¸     | æµ‹è¯•æ•°æ®é‡å°ï¼Œå †åªéœ€ 1GB |
| Nacos         | 512 MB      | å † 256 MB             | 0.5â€“1 æ ¸ | å•æœºå¼€å‘ä½¿ç”¨å³å¯       |
| Redis         | 512 MB      | maxmemory 256â€“512 MB | 0.5â€“1 æ ¸ | æ•°æ®é‡å°ï¼Œé¿å…å æ»¡å®¿ä¸»æœº   |
| MySQL         | 1 GB        | buffer 512 MB        | 1 æ ¸     | æµ‹è¯•æ•°æ®åº“ï¼Œæ•°æ®é‡å°‘     |

---

æ€»èµ„æºéœ€æ±‚ï¼ˆç²—ç•¥ï¼‰

- **å†…å­˜æ€»éœ€æ±‚** â‰ˆ 2 + 0.5 + 0.5 + 1 = **4â€“5 GB**
    
- **CPU æ€»éœ€æ±‚** â‰ˆ 3 æ ¸å·¦å³ï¼ˆåˆ†é…ç»™å„å®¹å™¨ï¼Œå®¿ä¸»æœº 2â€“4 æ ¸ä¹Ÿå¤Ÿï¼‰
    
- **ç¡¬ç›˜**ï¼š50â€“100 GB SSD è¶³å¤Ÿï¼ˆå­˜å‚¨æµ‹è¯•æ•°æ®å³å¯ï¼‰
    

> æ³¨æ„ï¼šå®¿ä¸»æœºè¿˜éœ€é¢„ç•™ OS å†…å­˜ï¼Œæ¨è 6â€“8 GB å†…å­˜å³å¯è¿è¡Œå…¨éƒ¨æœåŠ¡ã€‚

---
è®¡ç®—åé¢„ç•™èµ„æºï¼š

æ‰€ä»¥å®¿ä¸»æœºæ€»å†…å­˜ = å®¹å™¨é™åˆ¶æ€»å’Œ + **1.5â€“2 GB é¢„ç•™ï¼ˆè‡³å°‘ï¼›ç»™osï¼‰**

å»ºè®®æ€» CPU æ ¸æ•° â‰¥ å®¹å™¨ CPU é™åˆ¶æ€»å’Œ + **1 æ ¸**


ä»¥ä¸Šæ˜¯ä¸­é—´ä»¶------------



#### ==å¾®æœåŠ¡å’Œå‰ç«¯ï¼š==

| ç»„ä»¶         | å†…å­˜          | CPU          |
| ---------- | ----------- | ------------ |
| 12ä¸ªå¾®æœåŠ¡     | 12GB        | 4-6 vCPU     |
| 3ä¸ªå‰ç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ | 1.5GB       | 0.3-0.6 vCPU |
| OS å¼€é”€      | 2-4GB       | -            |
| æ€»è®¡         | 15.5-17.5GB | 4-8 vCPU     |
æ‰€ä»¥è¯´ä¸èƒ½è·‘åœ¨ä¸€å°osï¼Œ12ä¸ªå¾®æœåŠ¡è·‘ä¸€å°æœºå™¨ä¸Š

ä¸­é—´ä»¶å’Œå‰ç«¯è·‘åœ¨ä¸€ä¸ªæœºå™¨ä¸Š

### 2.éƒ¨ç½²å‘½ä»¤

#### ä¸­é—´ä»¶
##### ==nacos==
**é…ç½®NACOS_AUTH_ENABLE=false**ï¼Œ  å³ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®æ§åˆ¶å°å’Œæ¥å£ï¼Œè®¿é—®ä¸é‰´æƒï¼Œç›´æ¥è®¿é—®ï¼ˆwebç®¡ç†ç•Œé¢ã€åç«¯ï¼‰

æ‹‰å–é•œåƒï¼š
docker pull nacos/nacos-server:2.2.3


|ç›®å½•|å¿…é¡»/å»ºè®®æŒä¹…åŒ–|è¯´æ˜|
|---|---|---|
|`conf`|å¿…é¡»|é…ç½®æ–‡ä»¶|
|`data`|å¿…é¡»|æœ¬åœ°æ•°æ®åº“ã€æ³¨å†Œä¿¡æ¯|
|`logs`|å»ºè®®|æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥|
```
è¿è¡Œå‘½ä»¤ï¼š
 docker run -it --name nacos -p 8848:8848 -p 8080:8080  -p 9848:9848 -e MODE=standalone   -e NACOS_AUTH_TOKEN=d0d5SDJFUG1sVEo2N0xjMlFQUjRIU2JCYjFxNGhieWQK   -e NACOS_AUTH_IDENTITY_KEY=accessToken   -e NACOS_AUTH_IDENTITY_VALUE=wGyH2EPmlTJ67Lc2QPR4HSbBb1q4hbyd   nacos/nacos-server
 

 
  docker run -it --name nacos -p 8848:8848 -p 8080:8080 -p 9848:9848 -e MODE=standalone -e NACOS_AUTH_ENABLE=false --network host --restart=always nacos/nacos-server:v2.3.0 

 

```
![[Pasted image 20251114153213.png]]

æš´éœ²å®Œç«¯å£åçš„è®¿é—®æ–¹å¼ï¼š
==docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' nacos==
ip:8080
`http://172.17.0.2:8080`

æˆ–è®¿é—®`urlï¼šip:8848/nacos`
å·²exitedçš„å®¹å™¨ä½¿ç”¨`docker start å®¹å™¨å`å¯åŠ¨
![[Pasted image 20251110134629.png]]


>dockeræ•°æ®ï¼š
>- å®¹å™¨å†…æ–‡ä»¶ç³»ç»Ÿé»˜è®¤æ˜¯ä¸´æ—¶çš„ï¼Œå¦‚æœå®¹å™¨è¢«åˆ é™¤ï¼ˆ`docker rm`ï¼‰ï¼Œæ•°æ®ä¹Ÿæ²¡äº†ï¼›
>- è‹¥æƒ³æŒä¹…ä¿å­˜æ•°æ®ï¼ˆæ¯”å¦‚æ•°æ®åº“ï¼‰ï¼Œåº”ä½¿ç”¨ **æŒ‚è½½å·ï¼ˆVolumeï¼‰**ï¼š
    `docker run -d -v /mydata/mysql:/var/lib/mysql mysql:8.0`
    è¿™æ ·å…³æœºã€é‡å¯éƒ½ä¸ä¼šä¸¢ã€‚ã€‹



##### ==redis==
å¦‚æœä½ æƒ³ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

1. **è‡ªå·±å†™ä¸€ä¸ª redis.conf**ï¼Œç„¶åæŒ‚è½½è¿›å®¹å™¨ï¼š
    

`docker run -it --name redis -p 6379:6379 -v /path/to/redis.conf:/usr/local/etc/redis/redis.conf redis:7.0 redis-server /usr/local/etc/redis/redis.conf`

2. **ç›´æ¥ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨**ï¼ˆå®˜æ–¹æ¨èåšæ³•ï¼‰ï¼š
    
```
 docker run -it --name redis -p 6379:6379 redis:7.0
 


 
æœ€ç»ˆç‰ˆæœ¬ï¼š
 docker run -it --name redis -p 6379:6379 --restart=always --network host redis:7.0  redis-server --requirepass "123456"
 
```

![[Pasted image 20251114151919.png]]
å¥¹å°‘å¯†ç ï¼š
![[Pasted image 20251114151644.png]]

ğŸ’¡ æ€»ç»“ï¼š**å®˜æ–¹ Redis é•œåƒæœ¬èº«ä¸å¸¦é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨å³å¯ã€‚**

å®¢æˆ·ç«¯è¿æ¥ï¼š
redis-cli -h 127.0.0.1 -p 6379 -a StrongPassword123


##### ==mysql==

dockerè¿è¡Œå‘½ä»¤ï¼š
```
docker run -it --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:8.0

æœ€ç»ˆç‰ˆæœ¬ï¼š
 docker run -d --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -m 1g --memory-swap 1g --restart=always --network host mysql:8.0
```


![[Pasted image 20251114152918.png]]

![[Pasted image 20251114152924.png]]

myslqå®¢æˆ·ç«¯æµ‹è¯•ï¼š
mysql -h <å®¿ä¸»æœºIP> -P 3306 -u root -p

##### ==es==

**Elasticsearchï¼ˆç®€ç§° ESï¼‰é»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰å¯†ç çš„**

 **ES å¯åŠ¨æ—¶åšäº† bootstrap check**ï¼ˆç”Ÿäº§æ¨¡å¼å®‰å…¨æ£€æŸ¥ï¼‰ï¼Œæ£€æŸ¥ **æœ€å¤§è™šæ‹Ÿå†…å­˜åŒºåŸŸæ•°é‡**ï¼ˆ`vm.max_map_count`ï¼‰å¤ªå°
 - é»˜è®¤ `vm.max_map_count` å®¿ä¸»æœºå¯èƒ½åªæœ‰ `65530`ã€‚
- Elasticsearch è¦æ±‚ **è‡³å°‘ 262144** æ‰èƒ½å¯åŠ¨ã€‚

> âœ… è¿™æ˜¯ Docker/è™šæ‹Ÿæœºå¸¸è§çš„å¯åŠ¨ ES å¤±è´¥åŸå› ã€‚

ä¸´æ—¶è°ƒæ•´
sudo sysctl -w vm.max_map_count=262144
 æ°¸ä¹…è°ƒæ•´
 echo "vm.max_map_count=262144" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
ç¡®è®¤ç”Ÿæ•ˆ
sysctl vm.max_map_count


```
å¯åŠ¨eså®¹å™¨å‘½ä»¤
docker run -it --name es -p 9200:9200 -e "ES_JAVA_OPTS=-Xms2g -Xmx2g" -e "xpack.security.enabled=false" -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:8.11.0 

###å®˜æ–¹å‘½ä»¤
$ docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:tag


docker run -it --name es -p 9200:9200 -e "ES_JAVA_OPTS=-Xms512m -Xmx512m" -m 1g -e "xpack.security.enabled=false" -e "discovery.type=single-node" --restart=always --network host docker.elastic.co/elasticsearch/elasticsearch:8.11.0  #è¿˜æ˜¯ç”¨512å§ï¼Œæ•ˆæœæ˜¯ä¸åˆ°1Gå†…å­˜

##è¿™é‡Œè¿˜æ˜¯æ¢ä¸ªç‰ˆæœ¬å§7.17.24
 
æµ‹è¯•å‘½ä»¤
curl http://dockerip:9200
ç›´æ¥è®¿é—®ä¸å…è®¸httpï¼š
åˆ›å»ºæ—¶åŠ ä¸Šå‚æ•°ï¼Œå…³é—­å®‰å…¨æ¨¡å¼ï¼š
-e "xpack.security.enabled=false"
```

å°‘äº†**bootstrap.memory_lock=true**
ulimitsï¼ˆbootstrap.memory_lock=trueè¦æ±‚ï¼‰
volumes
port
network
![[Pasted image 20251114152435.png]]

![[Pasted image 20251114152441.png]]
`nofile` = **Number of Open Files**
	Linux é™åˆ¶ä¸€èˆ¬æ˜¯ **1024**ï¼ŒES æ¨èè‡³å°‘ **65536**


æ–¹å¼ Bï¼šä¿ç•™å®‰å…¨æ¨¡å¼

å¦‚æœæƒ³ä¿ç•™å®‰å…¨æ¨¡å¼ï¼š

`docker run -d --name es \   -p 9200:9200 -p 9300:9300 \   -e "discovery.type=single-node" \   -e "ELASTIC_PASSWORD=ä½ çš„å¯†ç " \   -e "ES_JAVA_OPTS=-Xms2g -Xmx2g" \   docker.elastic.co/elasticsearch/elasticsearch:8.11.0`

- ç„¶åç”¨ HTTPS + ç”¨æˆ·åå¯†ç è®¿é—®ï¼š
    

`curl -u elastic:ä½ çš„å¯†ç  https://localhost:9200 --cacert http_ca.crt`


##### minio

docker-compose.yml
```
version: '3.3'

services:
  minio:
    image: quay.io/minio/minio:latest
    container_name: minio
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - ./minio-data:/data
    environment:
      MINIO_ROOT_USER: MinioUserName20251122
      MINIO_ROOT_PASSWORD: MinioPassWord20251122
    command: server /data --console-address ":9001"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 30s
      timeout: 20s
      retries: 3
```


#### åç«¯
##### javaé¡¹ç›®è¿è¡Œ
ç›®æ ‡ï¼šæ‰“åŒ…å‡ºå¯æ‰§è¡Œjarï¼ˆå«ä¸»å‡½æ•°ã€æ¨¡å—ä¾èµ–ï¼‰
```

pom.xmlé…ç½®
	Spring Boot Maven Plugin
æ­¤æ—¶ï¼šmvn clean packageå³å¯æ‰“åŒ…å‡ºçš„æ˜¯å¯æ‰§è¡Œjarï¼Œå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„jarï¼ŒåŒ…å«ä¾èµ–å’Œä¸»å‡½æ•°å…¥å£ï¼Œå«fat jar
æ‰§è¡Œï¼š
	mvn clean package  #æ‰“åŒ…çš„äº‹å¯æ‰§è¡Œjar
ç›´æ¥è¿è¡Œï¼š
	java -jar target/myapp-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev




mvn -T 1C -DskipTests=true clean install  #æ™®é€šçš„ jar,åˆ«ç”¨ï¼Œæ— æ³•ç›´æ¥javaè¿è¡Œï¼Œè¦-cpæŒ‡å®šä¾èµ–+æŒ‡å®šä¸»ç±»
æ™®é€šjaræ‰§è¡Œï¼š
æŒ‡å®šä¸»ç±»ï¼ˆMain-Classï¼‰å’Œç±»è·¯å¾„ï¼ˆclasspathï¼‰
	java -cp target/myapp.jar:lib/* com.example.Main



å¦‚æœæ‰“æˆäº†æ™®é€šjarï¼Œè¡¥æ•‘ï¼š
mvn spring-boot:run -pl xnew-gateway -Dspring-boot.run.profiles=dev -Dspring-boot.run.jvmArguments="-Xms512m -Xmx512m"  > run-log/run.log 2>&1 &



#ç›´æ¥è¿è¡Œæºç ï¼Œä¸ç”Ÿæˆ JAR åŒ…ï¼›çˆ¶pomæ‰§è¡Œ+-pl xnew-gatewayï¼›å­æ¨¡å—æ‰§è¡Œä¸åŠ -pl xnew-gateway



```

cd ä¸‹è½½/å•†åŸæºç /shop-service-master/

 \> run.log 2>&1  # è¦†ç›–è¿½åŠ 
 æ•ˆæœæ˜¯ï¼š
 - **æ¯æ¬¡å¯åŠ¨æ¸…ç©ºä¸€æ¬¡æ–‡ä»¶ï¼ˆè¦†ç›–æ—§å†…å®¹ï¼‰**ï¼›
    
- **è¿è¡ŒæœŸé—´ä¸ä¼šåå¤è¦†ç›–ï¼Œè€Œæ˜¯æŒç»­å†™å…¥**ã€‚ 



#### å‰ç«¯
##### Vueé¡¹ç›®éƒ¨ç½²

vueé¡¹ç›®ç›®å½•
```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€ babel.config.js
â”œâ”€ jsconfig.json
â”œâ”€ package.json
â”œâ”€ package-lock.json
â”œâ”€ postcss.config.js
â”œâ”€ vue.config.js
â”œâ”€ LICENSE
â”œâ”€ README.md
â”œâ”€ README-zh.md
â”œâ”€ tips.txt
â”œâ”€ src/                # æºç ç›®å½•
â”‚  â”œâ”€ main.js          # å…¥å£æ–‡ä»¶ï¼ˆç¤ºä¾‹ï¼‰
â”‚  â”œâ”€ App.vue          # æ ¹ç»„ä»¶
â”‚  â””â”€ ...              # å…¶ä»–ç»„ä»¶ã€æ¨¡å—
â”œâ”€ public/             # é™æ€èµ„æºç›®å½•
â”‚  â””â”€ index.html       # ä¸» HTML æ–‡ä»¶
â”œâ”€ tests/              # æµ‹è¯•ç›®å½•
â”‚  â””â”€ ...              # å•å…ƒæµ‹è¯•æ–‡ä»¶
â””â”€ jest.config.js      # æµ‹è¯•é…ç½®æ–‡ä»¶

```
vue.config.jsæ˜¯vueç‰¹æœ‰çš„
éƒ¨ç½²å‘½ä»¤
```
npm install
npm run build
è¾“å‡ºç›®å½•ï¼š
dist/
éƒ¨ç½²é™æ€æ–‡ä»¶
	æ”¾åˆ°æœåŠ¡å™¨Nginxã€Apache

```


##### Reacté¡¹ç›®éƒ¨ç½²

reacté¡¹ç›®ç›®å½•
my-react-app/                  # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€ node_modules/               # npm å®‰è£…çš„ä¾èµ–åŒ…
â”œâ”€ public/                     # é™æ€èµ„æºç›®å½•
â”‚  â”œâ”€ index.html               # HTML æ¨¡æ¿æ–‡ä»¶
â”‚  â”œâ”€ favicon.ico              # ç½‘ç«™å›¾æ ‡
â”‚  â””â”€ ...                      # å…¶ä»–é™æ€èµ„æºï¼ˆå¦‚ imagesï¼‰
â”œâ”€ src/                        # æºç ç›®å½•
â”‚  â”œâ”€ index.js                 # å…¥å£æ–‡ä»¶ï¼ŒReactDOM.render() è°ƒç”¨
â”‚  â”œâ”€ App.js                   # æ ¹ç»„ä»¶
â”‚  â”œâ”€ App.css                  # æ ¹ç»„ä»¶æ ·å¼
â”‚  â”œâ”€ index.css                # å…¨å±€æ ·å¼
â”‚  â”œâ”€ components/              # å¯å¤ç”¨ç»„ä»¶ç›®å½•
â”‚  â”‚  â”œâ”€ Header.js
â”‚  â”‚  â”œâ”€ Footer.js
â”‚  â”‚  â””â”€ ...
â”‚  â”œâ”€ pages/                   # é¡µé¢ç»„ä»¶ç›®å½•ï¼ˆå¯é€‰ï¼‰
â”‚  â”‚  â”œâ”€ Home.js
â”‚  â”‚  â”œâ”€ About.js
â”‚  â”‚  â””â”€ ...
â”‚  â”œâ”€ hooks/                   # è‡ªå®šä¹‰ hookï¼ˆå¯é€‰ï¼‰
â”‚  â”‚  â””â”€ useFetch.js
â”‚  â”œâ”€ utils/                   # å·¥å…·å‡½æ•°ï¼ˆå¯é€‰ï¼‰
â”‚  â”‚  â””â”€ api.js
â”‚  â””â”€ assets/                  # å›¾ç‰‡ã€å­—ä½“ã€å›¾æ ‡ç­‰é™æ€èµ„æº
â”‚     â””â”€ logo.png
â”œâ”€ package.json                # npm é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ä¾èµ–å’Œè„šæœ¬
â”œâ”€ package-lock.json           # npm é”å®šä¾èµ–ç‰ˆæœ¬
â”œâ”€ .gitignore                  # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€ babel.config.js             # Babel è½¬è¯‘é…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€ webpack.config.js           # Webpack é…ç½®ï¼ˆå¦‚æœä¸æ˜¯ CRA é¡¹ç›®ï¼‰
â””â”€ jest.config.js              # æµ‹è¯•é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

```
npm install
npm run build
è¾“å‡ºç›®å½•ï¼š
build/
éƒ¨ç½²é™æ€æ–‡ä»¶
	æ”¾åˆ°æœåŠ¡å™¨Nginxã€Apache
```



nginxå®¿ä¸»æœºè®¿é—®ä¸åˆ°
CentOS é»˜è®¤é˜²ç«å¢™ (firewalld) ä¼šé˜»æ­¢å¤–éƒ¨è®¿é—® 80 ç«¯å£ã€‚

æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€ï¼š

sudo firewall-cmd --state
sudo firewall-cmd --list-all


å¦‚æœå¯ç”¨ï¼Œéœ€è¦å…è®¸ 80 ç«¯å£ï¼š

sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --reload






## å…¶ä»–
### git


git checkoutï¼ˆåˆ‡æ¢åˆ†æ”¯ï¼‰å’Œgit mergeï¼ˆåˆå¹¶åˆ†æ”¯ï¼‰
```
git merge origin/main
ğŸ‘‰ æŠŠ origin/main åˆ†æ”¯ä¸Šçš„æ›´æ–°åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
git checkout feature
ğŸ‘‰åˆ‡æ¢featureåˆ†æ”¯
ğŸ‘‰æˆ–-båŸºäºæœ¬åœ°ä»“åº“å¿«ç…§åˆ›å»ºæ–°åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Š
	git checkout -b feature origin/main
```

git cloneï¼ˆæ‹‰å–ä»£ç +åˆ›å»ºä»“åº“ï¼‰ å’Œgit pullï¼ˆæ‹‰å–ä»£ç +åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼‰
```
git clone
	git init repo(ç›®å½•repo/)
	git remote add origin https://github.com/user/repo.git  #æ·»åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œåå­—å« `origin`
	git fetch origin      #ï¼ˆä»£ç  + æäº¤å†å² + åˆ†æ”¯ï¼‰
	git checkout -b main origin/main  #åŸºäºorigin/mainå¿«ç…§åˆ›å»ºåˆ‡æ¢æœ¬åœ°åˆ†æ”¯main

git pull
åŠŸèƒ½ï¼šæ‹‰å–è¿œç¨‹åˆ†æ”¯çš„æœ€æ–°æäº¤å¹¶åˆå¹¶åˆ°å½“å‰åˆ†æ”¯
	git fetch + git merge
æ ¼å¼ï¼š
	# æ‹‰å–å½“å‰åˆ†æ”¯è¿½è¸ªçš„è¿œç¨‹åˆ†æ”¯
	git pull
	# æŒ‡å®šè¿œç¨‹ä»“åº“å’Œåˆ†æ”¯ï¼ˆå¦‚æœæ²¡æœ‰è¿½è¸ªå…³ç³»ï¼‰
	git pull <è¿œç¨‹ä»“åº“å> <è¿œç¨‹åˆ†æ”¯å>
	#**é»˜è®¤åˆå¹¶åˆ°å½“å‰æœ¬åœ°åˆ†æ”¯**ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®š `æœ¬åœ°åˆ†æ”¯å`
	
git push
	åŠŸèƒ½ï¼šå°†æœ¬åœ°åˆ†æ”¯çš„æäº¤æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ã€‚
	# æ¨é€å½“å‰åˆ†æ”¯åˆ°å…¶è¿½è¸ªçš„è¿œç¨‹åˆ†æ”¯
	git push
	# æŒ‡å®šè¿œç¨‹ä»“åº“å’Œåˆ†æ”¯ï¼ˆå¦‚æœæ²¡æœ‰è¿½è¸ªå…³ç³»ï¼‰
	git push <è¿œç¨‹ä»“åº“å> <æœ¬åœ°åˆ†æ”¯å>:<è¿œç¨‹åˆ†æ”¯å>
	
	åªæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯åŒåï¼Œå³ä½¿è¿˜æ²¡æœ‰å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå¯ä»¥ç”¨ç®€å†™ï¼š
	`git push origin main`
	
	
```

å»ºç«‹è¿½è¸ªå…³ç³»
```
æ„ä¹‰
	`git push` / `git pull` é»˜è®¤æ“ä½œè¿½è¸ªçš„è¿œç¨‹åˆ†æ”¯
	`git status` æ˜¾ç¤ºä¿¡æ¯ã€ä¾¿äºåä½œ

git clone <repo>
git checkout -b <æœ¬åœ°åˆ†æ”¯> <è¿œç¨‹åˆ†æ”¯>
git branch --set-upstream-to=<è¿œç¨‹åˆ†æ”¯>
git push -u <è¿œç¨‹ä»“åº“> <æœ¬åœ°åˆ†æ”¯>
#git pullä¸ä¼šå»ºç«‹è¿½è¸ªå…³ç³»
```



### ä¸­é—´ä»¶çš„ç«¯å£

æœ€å°æš´éœ²ç«¯å£

| ä¸­é—´ä»¶               | éœ€è¦æš´éœ²çš„ç«¯å£ | è¯´æ˜                                |
| ----------------- | ------- | --------------------------------- |
| **MySQL**         | `3306`  | ä¸»æœåŠ¡ç«¯å£                             |
| **Redis**         | `6379`  | ä¸»æœåŠ¡ç«¯å£,é›†ç¾¤(ä¼šç”¨åˆ° 16379 / 26379ï¼Œä½†å•æœºä¸ç”¨) |
| **Nacos**         | `8848`  | æ§åˆ¶å° / æ³¨å†Œä¸­å¿ƒ(é›†ç¾¤ï¼Œå°±éœ€è¦ 9848ã€9849)      |
| **Elasticsearch** | `9200`  | HTTP APIï¼ˆé›†ç¾¤éœ€ 9300ï¼‰                |

```
nacos:8848 account password #å¿…é¡»æœ‰ç”¨æˆ·åå’Œå¯†ç ï¼ˆé»˜è®¤æ˜¯ `nacos/nacos`ï¼‰
redis:6379 å¯†ç ï¼ˆæˆ‘æ²¡è®¾ç½®ï¼‰    #å¯†ç å¯é€‰ï¼Œç”Ÿäº§ç¯å¢ƒå¼ºçƒˆå»ºè®®é…ç½® `requirepass`ï¼Œå¦åˆ™å®¹æ˜“è¢«æœªæˆæƒè®¿é—®
mysqlï¼š3306 account password  #å¿…é¡»æœ‰ç”¨æˆ·åå’Œå¯†ç 
esï¼š9200          






#é»˜è®¤æ²¡æœ‰å¯†ç ï¼Œ**Elasticsearch ä» 8.x ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤ `xpack.security.enabled` æ˜¯å¼€å¯çš„ï¼Œè®¤æƒ…å†µä¸‹ **ES æ˜¯å¯ç”¨äº†å®‰å…¨è®¤è¯çš„**ï¼Œè¿˜é»˜è®¤å¼€å¯äº† **HTTPS**ï¼ˆTLS/SSLï¼‰ï¼Œéœ€è¦ä»å®¹å™¨ `/usr/share/elasticsearch/config/certs/http.p12` æˆ– `/certs` ç›®å½•è·å–è¯ä¹¦
```


### windowsçš„scp
æŠ¥é”™ï¼š
Host key has changedâ€**å…¬é’¥ï¼ˆhost keyï¼‰å‘ç”Ÿäº†å˜åŒ–**ï¼ŒSSH æ‹’ç»è¿æ¥ä»¥é˜²æ­¢ä¸­é—´äººæ”»å‡»
**`known_hosts` æ–‡ä»¶**ï¼šSSH å®¢æˆ·ç«¯ä¼šæŠŠæ¯ä¸ªè®¿é—®è¿‡çš„è¿œç¨‹ä¸»æœºçš„å…¬é’¥ä¿å­˜åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œï¼Œç”¨æ¥éªŒè¯èº«ä»½
è§£å†³ï¼š
åˆ é™¤æ—§çš„ host keyï¼Œå†é‡æ–°è¿æ¥
ssh-keygen -R 192.168.150.131

æŠ¥é”™ï¼š
** is not a regular file
è§£å†³ï¼š
å‹ç¼©ç›®å½•å†ä¼ è¾“
cd ç›®å½•
tar -czf å‹ç¼©ååå­— ç›®å½•
ç”¨ `scp` ä¼ è¾“å‹ç¼©åŒ…
scp
æˆ–è€…
`scp` ç›´æ¥ä¼ ç›®å½•éœ€è¦åŠ  `-r`




### lvmæ‰©å®¹
pv-vg-lv
pvæ˜¯å—è®¾å¤‡ï¼ˆç£ç›˜æˆ–åˆ†åŒºï¼‰
```
æ·»åŠ å—è®¾å¤‡
 pvcreate /dev/sdb1
 vgs  è¦æ‰©å®¹vgåå­—
 vgextend cnetosï¼ˆvg nameï¼‰ /dev/sdb1ï¼ˆpvï¼‰  æ·»åŠ pvåˆ°vg
 vgdisplay å½“å‰vgå®¹é‡æ‰©å±•äº†
 lvextend -l +100%FREE /dev/centos/root  æ‰©å®¹vg
   xfs_growfs /    æ‰©å®¹æ–‡ä»¶ç³»ç»Ÿ
df -Th  /
```

 
### ä¿®æ”¹ip
![[Pasted image 20251113104921.png]]

### nacosä¸Šä¼ é…ç½®
api+è„šæœ¬
sdk+ç¨‹åº


==api==
æµ‹è¯•ï¼š
`curl "http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=YIXIEKEJI-SELLER-WEB-dev.yml&group=DEFAULT_GROUP"`

ä¸Šä¼ ï¼š
`curl -X POST "http://127.0.0.1:8848/nacos/v1/cs/configs" \
     -d "dataId=YIXIEKEJI-SELLER-WEB-dev.yml" \
     -d "group=DEFAULT_GROUP" \
     -d "content=$(cat ./YIXIEKEJI-SELLER-WEB-dev.yml)"`
 ä¸Šä¼ è„šæœ¬ï¼š
 ```
 #!/bin/bash

CONFIG_DIR="./"
GROUP="DEFAULT_GROUP"
NACOS_URL="http://127.0.0.1:8848/nacos/v1/cs/configs"

for file in "$CONFIG_DIR"/*; do
    DATAID=$(basename "$file")
    CONTENT=$(cat "$file")
    curl -X POST "$NACOS_URL" \
         -d "dataId=$DATAID" \
         -d "group=$GROUP" \
         -d "content=$CONTENT"
    echo "Uploaded $DATAID to Nacos group $GROUP"
done

 ```

åˆ é™¤æŸä¸ªé…ç½®ï¼š
`curl -X DELETE "http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=è‡ªå·±ä¸å°å¿ƒä¸Šä¼ çš„æ–‡ä»¶.yml&group=DEFAULT_GROUP"`
