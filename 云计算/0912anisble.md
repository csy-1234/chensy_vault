---
date: "20250912"
docx:
  - ansible使用.docx
  - absible模块.docx
实验: 已做
---
[ansible使用.docx](附件/平台管理/1-ansible使用.docx)

# Ansible
## 概念
![[Pasted image 20250912095523.png]]![[Pasted image 20250912095737.png]]
## 实验 
安装
![[c47000042e6d26df598c3fce69321263.jpg]]
在ansible主机上生成密钥传给远程被管理的主机，可以无密钥连接远程主机
ansible其他命令+部分模块
![[Pasted image 20250913200110.png]]
![[91c4c284b09e6a20f9b7b1ed7fa2c28f.jpg]]
![[11273e8278d73fbd3761abb5968bf7dc.jpg]]
## 补充

==ssh建立连接的方式有哪些？==

SSH（Secure Shell）连接主要有两种常见方式：

1. 密码验证（Password Authentication）

- **方式**：直接在连接时输入目标主机用户的密码。
- **特点**：
    - 简单直观，适合临时登录或小规模使用。
    - 安全性相对低：如果密码弱或被窃取，就可能被攻破。
- **示例命令**：

`ssh user@host # 系统会提示输入密码`

2.密钥互信（Key-Based Authentication）

- **方式**：通过生成一对密钥（公钥 + 私钥），把公钥放在目标主机的 `~/.ssh/authorized_keys` 文件里，本地用私钥进行认证。
- **特点**：
    - 更安全，尤其适合自动化操作或脚本登录（无密码）。
    - 支持禁止密码登录，只允许密钥登录，防止暴力破解。
- **步骤**：
    1. **生成密钥对（本地）**：
        `ssh-keygen -t rsa -b 4096`
        默认生成 `~/.ssh/id_rsa`（私钥）和 `~/.ssh/id_rsa.pub`（公钥）。
    2. **将公钥复制到远程主机**：
        `ssh-copy-id user@host`
    3. **通过密钥登录**：
        `ssh user@host # 无需输入密码，如果私钥有口令，则输入口令`

- **密码登录**：简单，但安全性低。
    
- **密钥互信**：安全性高，适合自动化和运维环境。

==bash对于引号的解析？==
`!`（历史扩展符号）
`$`（变量符号）等普通的特殊字符类；
大多数 **普通特殊字符** 都属于第二类，可以通过 `\` 转义来防止特殊处理，而 `!` 是例外，属于历史扩展符号，处理方式比较特殊。

| 符号  | 单引号 `'...'` | 双引号 `"..."`   | 备注                    |
| --- | ----------- | ------------- | --------------------- |
| `!` | 不会展开        | 会展开（历史扩展）     | 双引号中 `\!` 仍然可能展开      |
| `$` | 不会展开        | 会展开，需要转义 `\$` | awk 的 `$1` 就要写成 `\$1` |
用 `\` 转义或单引号 `'...'` 包裹都可以防止 Bash 做特殊处理