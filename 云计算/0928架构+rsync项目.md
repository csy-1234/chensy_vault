---
date: "0928"
docx:
  - Rscyn备份系统数据.docx
实验:
---
[Rscyn备份系统数据.docx](附件/项目/Rscyn备份系统数据.docx)
# 架构

![[Pasted image 20251017181723.png]]
单点故障--mysql访问压力大
|
+mysql主从架构+读写分离（数据库进化）--tomcat压力过大
|
反向代理、负载均衡+tomcat集群（应用层进化）--nginx单点故障
|
keepalived负载均衡高可用+nginx（前端层进化）

|层级|典型组件|高可用目标|实现手段|
|---|---|---|---|
|**接入层（访问层）**|Keepalived + Nginx / LVS / ALB|防止“入口单点”宕机导致外部无法访问|**Keepalived** 提供 VIP 主备漂移；**Nginx / LVS** 提供反向代理、负载均衡|
|**应用层（逻辑层）**|Tomcat / SpringBoot / 微服务|防止单节点业务实例宕机影响服务|通过 **负载均衡** 实现多节点分流 + **无状态设计** 实现容灾|
|**持久层（数据层）**|MySQL 主从 / 主主 / MGR / ProxySQL|防止数据库单点故障或数据丢失|**主从复制**、**读写分离**、**自动切换**、**存储冗余**|

数据库数据量过大，查询缓慢
|
redis缓存集群（cluster或sentinel）提高查询速度效率
![[Pasted image 20251017183253.png]]

nfs：文件共享功能（存源代码、文件、图片、文档、日志、静态资源）

rsync：备份功能（日志、数据、配置文件、源代码等，所有机器的文件备份）

日志分析、可视化：elk

大叔数据分析：hadoop

监控主机zabbix或prometheus

批量操作主机：安absible

CI、CD：git、gitlab、jenkins

动静分离：nginx

kafka：hadoop与应用数据、elk内
以上架构术适用于k8s（微服务相关，当个业务主机或容器）
微服务是容器？？

网上的架构：前端交互层（pc、移动、小程序、其他）--前端UI（htnl、css、vue、js、react、typescript）--网关层（负载均衡+网关gateway、路由、限流、降级、黑白名单）--应用/业务层（门户、订单、购物车、库存、后台）等等
![[Pasted image 20251017194509.png]]


项目：
![[Pasted image 20251017195254.png]]


![[Pasted image 20251017195907.png]]
![[Pasted image 20251017195855.png]]
写：rediscluster+CICD+三层架构系统+rsync项目

还有以下为未学习完：k8s+虚拟化+虚拟机
![[Pasted image 20251017200152.png]]
==补充==

==架构中的HA==

`Keepalived` 在你的整个架构中，**实现的是“高可用（HA）角色”**，具体来说，是在负载均衡层（Nginx 或 LVS）实现 **主备切换（failover）** 的功能。

==NFS 与数据库存储的区别（非常关键）==

| 对比维度      | NFS               | MySQL（数据库）      |
| --------- | ----------------- | --------------- |
| **数据类型**  | 文件、图片、文档、日志、静态资源  | 结构化数据（表、行、字段）   |
| **访问方式**  | 文件系统级（mount、读写文件） | SQL 查询接口        |
| **一致性要求** | 一般只需最终一致          | 事务级强一致性         |
| **适合的内容** | 文件型、非结构化数据        | 业务型、结构化数据       |
| **示例**    | 用户上传头像、PDF 报表、视频等 | 用户信息表、订单表、交易记录等 |

> 🔸简而言之：  
> **NFS 存放文件（非结构化）**，  
> **MySQL 存放数据（结构化）**。  
> 二者互补，不冲突。
> NFS 的核心作用：**文件共享**


==elk==

✅ ELK 是**直接从被监控主机实时采集日志**的。  
❌ 而不是去读取 rsync 备份的日志文件。 
# rsync备份系统数据项目

1.确定备份主机、确定备份文件
![[Pasted image 20251017200752.png]]
开四台机器

安装
确定备份文件
备份主机创建统一/backup目录集中存放要备份文件
创建备份脚本
备份脚本加入定时任务
